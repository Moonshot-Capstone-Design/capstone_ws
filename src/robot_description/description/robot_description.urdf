<robot name="amr">

  <material name="white">
    <color rgba="1 1 1 1" />
  </material>

  <material name="orange">
    <color rgba="1 0.3 0.1 1" />
  </material>

  <material name="blue">
    <color rgba="0.2 0.2 1 1" />
  </material>

  <material name="black">
    <color rgba="0 0 0 1" />
  </material>

  <material name="red">
    <color rgba="1 0 0 1" />
  </material>

  <!-- Base Footprint -->
  <link name="base_link"/>

  <!-- Base Link -->
  <link name="chassis">
    <inertial>
      <origin xyz="0 0 0.18" rpy="0 0 0"/>
      <mass value="1.37291"/>
      <inertia ixx="0.0421114" ixy="0" ixz="0"
               iyy="0.0421114" iyz="0" izz="0.0752549"/>
    </inertial>

    <collision name="base_collision">
      <origin xyz="0 0 0.3" rpy="0 0 0"/>
      <geometry>
        <box size="0.6 0.35 0.1"/>
      </geometry>
    </collision>

    <visual name="base_visual">
      <geometry>
        <mesh filename="package://amr_demo/description/meshes/amr_body.stl"
              scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
    </visual>
  </link>

  <!-- Center laser (fusion frame) -->
  <link name="laser">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.114"/>
      <inertia ixx="0.001" ixy="0" ixz="0"
               iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>

    <visual name="laser_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.0385" length="0.03885"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>

  <!-- Front / Rear real LiDARs -->
  <link name="lidar2_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.114"/>
      <inertia ixx="0.001" ixy="0" ixz="0"
               iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>

    <visual name="lidar2_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.0385" length="0.03885"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>

  <link name="lidar1_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.114"/>
      <inertia ixx="0.001" ixy="0" ixz="0"
               iyy="0.001" iyz="0" izz="0.001"/>
    </inertial>

    <visual name="lidar1_visual">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <cylinder radius="0.0385" length="0.03885"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>

  <!-- Left Wheel Link -->
  <link name="wheel_left_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="1.11756e-05" ixy="-4.23698e-11" ixz="-5.93817e-09"
               iyy="1.11924e-05" iyz="-1.44001e-11" izz="2.07126e-05"/>
    </inertial>

    <collision name="wheel_left_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <!-- φ130mm → radius 0.065 -->
        <cylinder radius="0.065" length="0.046"/>
      </geometry>
    </collision>

    <visual name="wheel_left_visual">
      <origin xyz="0 0 0" rpy="-1.57 0 0"/>
      <geometry>
        <mesh filename="package://amr_demo/description/meshes/amr_wheel.stl"
              scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>

  <!-- Right Wheel Link -->
  <link name="wheel_right_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="1.11756e-05" ixy="-4.23698e-11" ixz="-5.93817e-09"
               iyy="1.11924e-05" iyz="-1.44001e-11" izz="2.07126e-05"/>
    </inertial>

    <collision name="wheel_right_collision">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <!-- φ130mm → radius 0.065 -->
        <cylinder radius="0.065" length="0.046"/>
      </geometry>
    </collision>

    <visual name="wheel_right_visual">
      <origin xyz="0 0 0" rpy="-1.57 0 0"/>
      <geometry>
        <mesh filename="package://amr_demo/description/meshes/amr_wheel.stl"
              scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>
  </link>

  <!-- Joint definitions -->

  <joint name="base_joint" type="fixed">
    <parent link="base_link"/>
    <child link="chassis"/>
    <origin xyz="0 0 0.001" rpy="0 0 0"/>
  </joint>

<joint name="wheel_left_joint" type="continuous">
  <parent link="chassis"/>
  <child link="wheel_left_link"/>
  <origin xyz="0 0.16 -0.065" rpy="-1.57 0 0"/>
  <!-- 바퀴가 y축 기준으로 도는 구조라면 -->
  <axis xyz="0 1 0"/>
</joint>

<joint name="wheel_right_joint" type="continuous">
  <parent link="chassis"/>
  <child link="wheel_right_link"/>
  <origin xyz="0 -0.16 -0.065" rpy="1.57 0 0"/>
  <axis xyz="0 1 0"/>
</joint>


  <!-- Central fused laser frame -->
  <joint name="lidar_joint" type="fixed">
    <parent link="chassis"/>
    <child link="laser"/>
    <!-- 로봇 센터 기준 -->
    <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
  </joint>

  <!-- Front LiDAR -->
  <joint name="lidar1_joint" type="fixed">
    <parent link="chassis"/>
    <child link="lidar1_link"/>
    <!-- 앞으로 10.5cm, 오른쪽 7.5cm, 위로 25cm -->
    <origin xyz="0.105 -0.075 0.25" rpy="0 0 0"/>
  </joint>

  <!-- Rear LiDAR (180 deg yaw) -->
  <joint name="lidar2_joint" type="fixed">
    <parent link="chassis"/>
    <child link="lidar2_link"/>
    <!-- 뒤로 10.5cm, 왼쪽 7.5cm, 위로 25cm -->
    <origin xyz="-0.105 0.075 0.25" rpy="0 0 3.14159"/>
  </joint>

</robot>
